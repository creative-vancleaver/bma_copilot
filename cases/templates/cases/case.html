{% extends 'core/base.html' %}
{% load static %}

{% block title %}Case {{ case.name }}{% endblock %}

{% block head %}
<style>
    .container {
        display: flex;
    }
    
    .sidebar {
        width: 250px;
        background: #f0ebf8;
        padding: 20px;
        height: 100vh;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }
    
    .sidebar-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-weight: bold;
        font-size: 18px;
    }
    
    .menu-toggle {
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
    }
    
    .sidebar-section h3 {
        font-size: 16px;
        color: #5a3ea3;
        margin-top: 10px;
    }
    
    .sidebar-section ul {
        list-style: none;
        padding: 0;
    }
    
    .sidebar-section ul li {
        background: white;
        padding: 8px;
        margin: 5px 0;
        border-radius: 5px;
        display: flex;
        justify-content: space-between;
    }
    
    .content {
        flex: 1;
        padding: 20px;
        text-align: center;
    }
    
    .classification-header h2 {
        font-size: 24px;
        color: #4a2f93;
    }
    
    .cell-classification {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
    }
    
    .cell-images {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 10px;
        margin-top: 10px;
    }
    
    .cell-images img {
        width: 100%;
        border-radius: 5px;
    }
    
    .percentage {
        margin-top: 10px;
        font-weight: bold;
        color: #4a2f93;
    }
</style>
{% endblock head %}

{% block content %}

    <div class="container">
        
        <aside class="sidebar">
            <div class="sidebar-header">
                <buton class="menu-toggle">XX</buton>
                <h2>Summary</h2>
            </div>

            <div class="sidebar-section">
                <h3>Annotated Regions</h3>
            </div>
            <div class="sidebar-section">
                <h3>Differential Count</h3>
                <ul>
                    {% for cell_type, percentage in differential_counts.items %}
                        <li>{{ cell_type }} <span>{{ precentage }}</span></li>
                    {% endfor %}
                </ul>
            </div>
        </aside>

        <div class="classifcation-header">
            <h2>Cell Classifications</h2>
        </div>

        {% for classifcation, images in cell_classification.items %}
            <section class="cell-classifaction">
                <h3>{{ classification }}</h3>
                <div class="cell-images"></div>
                {% for image in images %}
                    <img src="{{ image.url }}" alt="{{ classifaction }}">
                {% endfor %}
            </section>
        {% endfor %}
    </div>

{% endblock content %}